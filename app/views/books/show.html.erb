

<p>
  <strong>図書名:</strong><br>
  <%= @book.title %>
</p>

<p>
  <strong>著者名:</strong><br>
  <%= @book.author %>
</p>

<p>
  <strong>出版社:</strong><br>
  <%= @book.publisher %>
</p>

<% if @book.user.syoko %>
  <p>
    <strong>貸出日:</strong><br>
    貸出可能(<%= @book.user.place %>)
  </p>
  <p>
    <strong>返却期限：</strong><br>
    -
  </p>
  <p>
    <strong>利用者：</strong><br>
    -
  </p>
  <p>
    <strong>所有者：</strong><br>
    -
  </p>
<% else %>
  <p>
    <strong>貸出日:</strong><br>
    <%= (@book.updated_at).strftime("%Y-%m-%d") %>
  </p>
  <p>
    <strong>返却期限：</strong><br>
    <%= (@book.updated_at + 7.days).strftime("%Y-%m-%d") %>
  </p>
  <p>
    <strong>利用者：</strong><br>
    <%= @book.user.email %>
  </p>
  <p>
    <strong>所有者：</strong><br>
    -
  </p>
<% end %>



<% if @book.user.syoko %>
  <%= button_to '借ります！', rent_book_path(@book),
  :method => :patch, data: { confirm: '貸出処理を行いますか？' }, :class => 'btn btn-primary' %>
<% elsif @book.user_id == current_user.id %>
  <%= button_to '返します！', edit_book_path(@book), :method => :get, :class => 'btn btn-primary' %>
<% end %>

<%= button_to 'コメントする', new_book_comment_path(@book), :method => :get, :class => 'btn btn-primary' %>


<table class="table">
  <thead>
    <tr>
      <!--<th>#</th>-->
      <th>コメント</th>
      <th>ユーザ名</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
      <% @comments.each do |c| %>
        <tr>
        <% if c.comment.length < 30 then %>
          <td><%= link_to c.comment, comment_path(c) %></td>
        <% else %>
          <td><%= link_to c.comment.slice(0,30) + '...', comment_path(c) %></td>
        <% end %>
        <td><%= c.user.email %></td>
        </tr>
      <% end %>
  </tbody>
</table>

<%#= button_to "削除", { :action => "rent", :id => @book.id }, :confirm => "本当に削除しますか?" %>
<%#if current_user.id == @book.user_id %>
  <%#= link_to 'Destroy', @book, method: :delete,  %>
<%# end %>
